<!DOCTYPE html>
<!-- saved from url=(0045)https://spacetech.github.io/Rebble/index.html -->
<html class="ui-mobile"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><!--<base href="https://spacetech.github.io/Rebble/index.html">--><base href=".">
	<title>Rebble Configuration</title>
	
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="./Rebble Configuration_files/jquery.mobile-1.4.1.min.css">
	<script src="./Rebble Configuration_files/jquery-1.9.1.min.js"></script>
	<script src="./Rebble Configuration_files/jquery.mobile-1.4.1.min.js"></script>
	<script>
		function setDefaultOptions()
		{
			$('#username').val(getURLParameter("username", ""));
			$('#password').val(getURLParameter("password", ""));
			$('#subreddits_enabled').prop('checked', parseBool(getURLParameter("subreddits_enabled", "false"))).checkboxradio('refresh');
			$('#subreddits').val(getURLParameter("subreddits", ""));

			//onSubredditsEnabledChange();
		}

		function parseBool(val)
		{
			return val == "true" || val == 1;
		}

		function saveOptions()
		{
			var options = {
				'username': $("#username").val(),
				'password': $("#password").val(),
				'subreddits_enabled': $("#subreddits_enabled").is(":checked"),
				'subreddits': $("#subreddits").val()
			}
			return options;
		}

		function getURLParameter(name, def)
		{
			var ret = decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(location.search)||[,""])[1].replace(/\+/g, '%20'))||null;
			if(ret === null)
			{
				return def;
			}
			return ret;
		}

		/*
		function onSubredditsEnabledChange()
		{
			if($("#subreddits_enabled").is(':checked'))
			{
				$('#subreddits').attr("disabled", false);
			}
			else
			{
				$('#subreddits').attr("disabled", "disabled");
			}
		}
		*/

		// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent
		function fixedEncodeURIComponent(str)
		{
			return encodeURIComponent(str).replace(/[!'()]/g, escape).replace(/\*/g, "%2A");
		}

		$().ready(function()
		{
			$("#b-cancel").click(function() {
				document.location = "pebblejs://close";
			});

			$("#b-save").click(function() {
				var location = "pebblejs://close#" + fixedEncodeURIComponent(JSON.stringify(saveOptions()));
				document.location = location;
			});
			
			try
			{
				setDefaultOptions();
			}
			catch(ex)
			{

			}

			//$("#subreddits_enabled").bind("change", onSubredditsEnabledChange);
		});
	</script>
	<style>
		.ui-block-a
		{
			padding: 0 5px;
		}
		.ui-block-b
		{
			padding: 0 5px;
		}
		body {
			background-color: linen;
		}
	</style>
</head>
<body class="ui-mobile-viewport ui-overlay-a">
	<div data-role="page" id="main" data-url="main" tabindex="0" class="ui-page ui-page-theme-a ui-page-active" style="min-height: 561px;">
		<div data-role="content" class="ui-content" role="main">
			<div class="ui-field-contain">
				<h1>Developed by SpaceTech</h1>
				<p>Hosted by MPG13 in case SpaceTech's server ever shuts down</p>
				<label for="username">Username:</label>
				<div class="ui-input-text ui-body-inherit ui-corner-all ui-shadow-inset"><input type="text" name="username" id="username" autocapitalize="off" autocorrect="off"></div>
			</div>
			<div class="ui-field-contain">
				<label for="password">Password:</label>
				<div class="ui-input-text ui-body-inherit ui-corner-all ui-shadow-inset"><input type="password" name="password" id="password" autocapitalize="off" autocorrect="off"></div>
			</div>
			<div class="ui-field-contain">
				
				<div class="ui-checkbox"><label for="subreddits_enabled" class="ui-btn ui-corner-all ui-btn-inherit ui-btn-icon-left ui-checkbox-off">Use Custom Subreddits</label><input type="checkbox" name="subreddits_enabled" id="subreddits_enabled"></div>
			</div>
			<div class="ui-field-contain">
				<label for="subreddits" class="select">Custom Subreddit(s):</label>
				<textarea name="subreddits" id="subreddits" autocapitalize="off" autocorrect="off" placeholder="aww,pics,jokes" class="ui-input-text ui-shadow-inset ui-body-inherit ui-corner-all ui-textinput-autogrow" style="height: 52px;"></textarea>
			</div>
		</div>
		<div class="ui-grid-a">
			<div class="ui-block-a"><button type="submit" data-theme="d" id="b-cancel" class=" ui-btn ui-btn-d ui-shadow ui-corner-all">Cancel</button></div>
			<div class="ui-block-b"><button type="submit" data-theme="a" id="b-save" class=" ui-btn ui-btn-a ui-shadow ui-corner-all">Save</button></div>
		</div>
	</div>


<div class="ui-loader ui-corner-all ui-body-a ui-loader-default"><span class="ui-icon-loading"></span><h1>loading</h1></div></body></html>
